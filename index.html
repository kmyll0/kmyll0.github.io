<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Coordenadas</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; background: #f0f0f0; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 400px; margin: 0 auto; }
        h1 { font-size: 1.5rem; color: #333; }
        button { background: #007bff; color: white; border: none; padding: 15px 30px; font-size: 1rem; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 10px; }
        button:active { background: #0056b3; }
        button.secondary { background: #6c757d; margin-top: 10px; }
        #output { margin-top: 20px; text-align: left; font-size: 0.95rem; line-height: 1.6; }
        .label { font-weight: bold; color: #555; }
        .error { color: red; margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h1>üìç Capturar Localiza√ß√£o</h1>
    <p>Toque no bot√£o abaixo para gerar as coordenadas atuais.</p>
    
    <button onclick="getLocation()">Obter Coordenadas</button>
    
    <div id="output"></div>
    <div id="actions" style="display:none;">
        <button class="secondary" onclick="copyToClipboard()">Copiar Texto</button>
        <button class="secondary" style="background:#28a745;" onclick="openMap()">Abrir no Google Maps</button>
    </div>
</div>

<script>
    let currentLat = null;
    let currentLon = null;

    function getLocation() {
        const output = document.getElementById("output");
        const actions = document.getElementById("actions");
        
        output.innerHTML = "Aguardando sat√©lite...";
        actions.style.display = "none";

        if (!navigator.geolocation) {
            output.innerHTML = "<p class='error'>Seu navegador n√£o suporta geolocaliza√ß√£o.</p>";
            return;
        }

        // Solicita alta precis√£o (usa GPS real em vez de apenas Wifi/Torres)
        const options = {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
        };

        navigator.geolocation.getCurrentPosition(showPosition, showError, options);
    }

    function showPosition(position) {
        currentLat = position.coords.latitude;
        currentLon = position.coords.longitude;
        const acc = position.coords.accuracy;
        const date = new Date(position.timestamp).toLocaleString();

        const output = document.getElementById("output");
        output.innerHTML = `
            <p><span class="label">Latitude:</span> ${currentLat}</p>
            <p><span class="label">Longitude:</span> ${currentLon}</p>
            <p><span class="label">Precis√£o:</span> ${acc.toFixed(1)} metros</p>
            <p><span class="label">Data:</span> ${date}</p>
        `;
        
        document.getElementById("actions").style.display = "block";
    }

    function showError(error) {
        let msg = "";
        switch(error.code) {
            case error.PERMISSION_DENIED: msg = "Usu√°rio negou a permiss√£o de localiza√ß√£o."; break;
            case error.POSITION_UNAVAILABLE: msg = "Informa√ß√£o de local indispon√≠vel."; break;
            case error.TIMEOUT: msg = "O tempo para obter a localiza√ß√£o esgotou."; break;
            default: msg = "Erro desconhecido."; break;
        }
        document.getElementById("output").innerHTML = `<p class='error'>${msg}</p>`;
    }

    function copyToClipboard() {
        if(currentLat && currentLon) {
            const text = `${currentLat}, ${currentLon}`;
            navigator.clipboard.writeText(text).then(() => {
                alert("Coordenadas copiadas!");
            });
        }
    }

    function openMap() {
        if(currentLat && currentLon) {
            window.open(`https://www.google.com/maps?q=${currentLat},${currentLon}`, '_blank');
        }
    }
</script>

</body>
</html>
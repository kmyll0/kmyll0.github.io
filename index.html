Put your HTML text<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Pro + Debug</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f0f2f5; text-align: center; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        button { width: 100%; padding: 15px; background: #007bff; color: white; border: none; border-radius: 8px; font-size: 16px; margin-top: 10px; cursor: pointer; }
        .log-box { margin-top: 20px; background: #333; color: #0f0; padding: 10px; text-align: left; font-family: monospace; font-size: 12px; border-radius: 6px; height: 150px; overflow-y: scroll; }
        .big-number { font-size: 24px; font-weight: bold; color: #333; margin: 10px 0; }
        .success { color: #28a745; }
        .warning { color: #ffc107; }
    </style>
</head>
<body>

<div class="card">
    <h3>Ferramenta de Ponto</h3>
    
    <div id="displayArea">
        <p>Precisão Atual:</p>
        <div id="accDisplay" class="big-number">-- m</div>
        <p id="statusText">Aguardando início...</p>
    </div>

    <button onclick="startGPS()">INICIAR CAPTURA</button>
    <button onclick="copyData()" style="background:#28a745; display:none;" id="btnCopy">COPIAR DADOS</button>
    <button onclick="window.open(`https://maps.google.com/?q=${lastLat},${lastLon}`)" style="background:#6c757d; display:none;" id="btnMap">VER NO MAPA</button>

    <div class="log-box" id="debugLog">
        > Console pronto...<br>
    </div>
</div>

<script>
    let watchId = null;
    let lastLat = 0, lastLon = 0;

    function log(msg) {
        const box = document.getElementById('debugLog');
        const time = new Date().toLocaleTimeString();
        box.innerHTML += `[${time}] ${msg}<br>`;
        box.scrollTop = box.scrollHeight; // Rola para o final
    }

    function startGPS() {
        if (!navigator.geolocation) {
            log("ERRO CRÍTICO: Navegador sem suporte a GPS.");
            return;
        }

        log("Solicitando GPS de alta precisão...");
        
        const options = {
            enableHighAccuracy: true, // Essencial
            timeout: 30000,           // 30 segundos
            maximumAge: 0             // Proíbe cache
        };

        watchId = navigator.geolocation.watchPosition(success, error, options);
    }

    function success(pos) {
        const acc = pos.coords.accuracy;
        lastLat = pos.coords.latitude;
        lastLon = pos.coords.longitude;

        document.getElementById('accDisplay').innerText = acc.toFixed(1) + " m";
        log(`Leitura: Lat ${lastLat.toFixed(5)}, Acc ${acc.toFixed(1)}m`);

        if (acc <= 20) {
            document.getElementById('statusText').innerHTML = "<span class='success'>✅ Precisão Atingida!</span>";
            document.getElementById('btnCopy').style.display = "block";
            document.getElementById('btnMap').style.display = "block";
            log("SUCESSO: Meta de 20m atingida. Travando.");
            
            navigator.geolocation.clearWatch(watchId); // Para de buscar
        } else {
            document.getElementById('statusText').innerHTML = "<span class='warning'>⚠️ Calibrando... (Sinal fraco)</span>";
        }
    }

    function error(err) {
        let msg = "";
        switch(err.code) {
            case 1: msg = "PERMISSÃO NEGADA pelo usuário."; break;
            case 2: msg = "POSIÇÃO INDISPONÍVEL (GPS desligado ou sem sinal)."; break;
            case 3: msg = "TIMEOUT (Demorou muito)."; break;
            default: msg = "ERRO DESCONHECIDO: " + err.message; break;
        }
        log("ERRO: " + msg);
        alert("Erro no GPS: " + msg);
    }

    function copyData() {
        navigator.clipboard.writeText(`${lastLat}, ${lastLon}`);
        alert("Copiado!");
    }
</script>

</body>
</html>